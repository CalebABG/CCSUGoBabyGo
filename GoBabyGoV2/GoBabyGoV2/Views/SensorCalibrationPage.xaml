<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:ios="clr-namespace:Xamarin.Forms.PlatformConfiguration.iOSSpecific;assembly=Xamarin.Forms.Core"
             xmlns:local="clr-namespace:GoBabyGoV2.ViewModels"
             xmlns:utilities="clr-namespace:GoBabyGoV2.Utilities"
             ios:Page.UseSafeArea="true"
             x:Class="GoBabyGoV2.Views.SensorCalibrationPage"
             BackgroundColor="White">

    <ContentPage.BindingContext>
        <local:SensorCalibrationViewModel/>
    </ContentPage.BindingContext>

    <ContentPage.Resources>
        <ResourceDictionary>
            <Color x:Key="CalibButtonColor">#C4E3FF</Color>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ContentPage.Content>

        <StackLayout Margin="25" VerticalOptions="CenterAndExpand">

            <Label Text="Calibrate your phone's accelerometer!" TextColor="Black" FontSize="27"
                   HorizontalTextAlignment="Center"
                   HorizontalOptions="CenterAndExpand" />

            <Label Text="Slowly and gently rotate your phone fully around: horizontally and then vertically." 
                   HorizontalTextAlignment="Center"
                   HorizontalOptions="Center" FontSize="18" TextColor="Black"/>

            <ImageButton Source="round_report_black_24.png" Aspect="AspectFit"
                         HeightRequest="120" WidthRequest="40"/>

            <StackLayout Orientation="Horizontal" HeightRequest="160" HorizontalOptions="Center" >

                <Grid VerticalOptions="Center" 
                      BindingContext="{x:Static utilities:AccelMonitor.AccelCalib}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Label x:Name="accelMinXLabel" 
                           Grid.Row="0" Grid.Column="0"
                           Text="{Binding AccelMinX, StringFormat='Min X: {0:F2}'}"
                           TextColor="Black"
                           FontSize="22" Margin="0,0,55,0"/>

                    <Label x:Name="accelMaxXLabel" 
                           Grid.Row="0" Grid.Column="1" 
                           Text="{Binding AccelMaxX, StringFormat='Max X: {0:F2}'}" 
                           TextColor="Black"
                           FontSize="22"/>

                    <Label x:Name="accelMinYLabel" 
                           Grid.Row="1" Grid.Column="0" 
                           Text="{Binding AccelMinY, StringFormat=' Min Y: {0:F2}'}" 
                           TextColor="Black"
                           FontSize="22" Margin="0,0,55,0"/>

                    <Label x:Name="accelMaxYLabel" 
                           Grid.Row="1" Grid.Column="1" 
                           Text="{Binding AccelMaxY, StringFormat='Max Y: {0:F2}'}" 
                           TextColor="Black"
                           FontSize="22"/>

                </Grid>

            </StackLayout>

            <StackLayout Orientation="Horizontal" HorizontalOptions="Center">

                <Button Text="Reset" TextColor="Black" 
                        BackgroundColor="{StaticResource CalibButtonColor}" 
                        Padding="10,0" CornerRadius="20" Command="{Binding ResetCalibrationCommand}"/>
                
                <Button Text="Default" TextColor="Black" 
                        BackgroundColor="{StaticResource CalibButtonColor}" 
                        Padding="10,0" CornerRadius="20" Command="{Binding SetDefaultCalibrationCommand}"/>
                
                <Button Text="Done" TextColor="Black" 
                        BackgroundColor="{StaticResource CalibButtonColor}" 
                        Padding="10,0" CornerRadius="20" Command="{Binding DoneButtonCommand}"/>

            </StackLayout>

        </StackLayout>

    </ContentPage.Content>

</ContentPage>